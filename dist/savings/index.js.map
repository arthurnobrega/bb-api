{"version":3,"sources":["../../src/savings/index.js"],"names":["BBSavings","accountsUrl","BASE_ENDPOINT","headers","DEFAULT_HEADERS","cookie","LoginCookie","getGlobal","response","text","json","JSON","parse","console","log","sessions","conteiner","telas","sessoes","title","cabecalho","variations","celulas","map","c","acao","split","splice","v","BBSavingsAccount","variation","parseInt","description"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;IAEqBA,S;;;;;;;;;;;;;;;AAEXC,cAAAA,W,GAAc,gC;;mDAEG,qCAASC,wBAAT,SAAyBD,WAAzB,GAAwC;AAC7DE,gBAAAA,OAAO,oBACFC,0BADE;AAELC,kBAAAA,MAAM,EAAEC,wBAAYC,SAAZ;AAFH;AADsD,eAAxC,C;;;AAAjBC,cAAAA,Q;;mDAOaA,QAAQ,CAACC,IAAT,E;;;AAAbA,cAAAA,I;AACAC,cAAAA,I,GAAOC,IAAI,CAACC,KAAL,CAAWH,IAAX,C;AACbI,cAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AAEMK,cAAAA,Q,GAAWL,IAAI,CAACM,SAAL,CAAeC,KAAf,CAAqB,CAArB,EAAwBC,OAAxB,CAAgC,CAAhC,C;AACXC,cAAAA,K,GAAQJ,QAAQ,CAACK,S;AACjBC,cAAAA,U,GAAaN,QAAQ,CAACO,OAAT,CAAiBC,GAAjB,CACjB,UAAAC,CAAC;AAAA,uBAAIA,CAAC,CAACC,IAAF,CAAOC,KAAP,CAAa,WAAb,EAA0BC,MAA1B,CAAiC,CAAC,CAAlC,EAAqC,CAArC,CAAJ;AAAA,eADgB,C;+CAIZN,UAAU,CAACE,GAAX,CACL,UAAAK,CAAC;AAAA,uBACC,IAAIC,0BAAJ,CAAqB;AACnBC,kBAAAA,SAAS,EAAEC,QAAQ,CAACH,CAAD,EAAI,EAAJ,CADA;AAEnBI,kBAAAA,WAAW,YAAKb,KAAL,+BAAyBS,CAAzB;AAFQ,iBAArB,CADD;AAAA,eADI,C","sourcesContent":["import fetch from 'node-fetch';\nimport LoginCookie from '../loginCookie';\nimport { BASE_ENDPOINT, DEFAULT_HEADERS } from '../constants';\nimport BBSavingsAccount from './savingsAccount';\n\nexport default class BBSavings {\n  async getAccounts() {\n    const accountsUrl = 'tela/ExtratoDePoupanca/entrada';\n\n    const response = await fetch(`${BASE_ENDPOINT}${accountsUrl}`, {\n      headers: {\n        ...DEFAULT_HEADERS,\n        cookie: LoginCookie.getGlobal(),\n      },\n    });\n\n    const text = await response.text();\n    const json = JSON.parse(text);\n    console.log(json);\n\n    const sessions = json.conteiner.telas[0].sessoes[0];\n    const title = sessions.cabecalho;\n    const variations = sessions.celulas.map(\n      c => c.acao.split('variacao=').splice(-1)[0],\n    );\n\n    return variations.map(\n      v =>\n        new BBSavingsAccount({\n          variation: parseInt(v, 10),\n          description: `${title} - Variação ${v}`,\n        }),\n    );\n  }\n}\n"],"file":"index.js"}